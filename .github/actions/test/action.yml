name: "Run Tests"
inputs:
  environment:
    description: 'Pixi environment'
    required: true
  arguments:
    description: 'Pytest arguments'
    required: false
    default: ''
runs:
  using: composite
  steps:
    - name: Test
      shell: bash
      env:
        SNOWFLAKE_ACCOUNT: ${{ variables.SNOWFLAKE_ACCOUNT }}
        SNOWFLAKE_USER: ${{ variables.SNOWFLAKE_USER }}
        SNOWFLAKE_PASSWORD: ${{ secrets.SNOWFLAKE_PASSWORD }}
      run: |
        pixi run -e ${{ inputs.environment }} pytest tests -ra ${DEBUG:+-v} --color=yes ${{ inputs.arguments }}

